<?php

use Drupal\Core\Field\BaseFieldDefinition;

/**
 * Adds a birth date field to the zoopal_creature entity type.
 */
function zoopal_creature_update_9001(&$sandbox) {
  $field_storage_definition = BaseFieldDefinition::create('datetime')
    ->setRevisionable(TRUE)
    ->setTranslatable(FALSE)
    ->setLabel(t('Birth Date'))
    ->setDescription(t('The birth date of the creature'))
    ->setRequired(FALSE)
    ->setCardinality(1)
    ->setSetting('datetime_type', 'date')
    ->setDisplayOptions('form', [
      'type' => 'datetime_default',
      'weight' => 1,
    ])
    ->setDisplayConfigurable('form', TRUE)
    ->setDisplayOptions('view', [
      'label' => 'inline',
      'weight' => 1,
      'settings' => [
        'timezone_override' => '',
        'format_type' =>  'short',
      ],
    ])
    ->setDisplayConfigurable('view', TRUE);

  \Drupal::entityDefinitionUpdateManager()
    ->installFieldStorageDefinition('birth_date', 'zoopal_creature', 'zoopal_creature', $field_storage_definition);

}

/**
 * Adds a favorite food field to the zoopal_creature entity type.
 */
function zoopal_creature_update_9002(&$sandbox)
{
  $field_storage_definition =
  BaseFieldDefinition::create('string')
    ->setRevisionable(TRUE)
    ->setTranslatable(TRUE)
    ->setLabel(t('Favorite Food'))
    ->setDescription(t('The favorite food of the creature entity.'))
    ->setSetting('max_length', 255)
    ->setDisplayOptions('form', [
      'type' => 'string_textfield',
      'weight' => 2,
    ])
    ->setDisplayConfigurable('form', TRUE)
    ->setDisplayOptions('view', [
      'label' => 'inline',
      'type' => 'string',
      'weight' => 2,
    ])
    ->setDisplayConfigurable('view', TRUE);

  \Drupal::entityDefinitionUpdateManager()
    ->installFieldStorageDefinition('favorite_food', 'zoopal_creature', 'zoopal_creature', $field_storage_definition);
}
